name: Build Android APK (Debug)

on:
  push:
      branches: [ "main" ]
        workflow_dispatch:

        jobs:
          build:
              runs-on: ubuntu-latest
                  defaults:
                        run:
                                working-directory: mobile
                                    steps:
                                          - name: Checkout
                                                  uses: actions/checkout@v4

                                                        - name: Setup Java
                                                                uses: actions/setup-java@v4
                                                                        with:
                                                                                  distribution: 'temurin'
                                                                                            java-version: '17'

                                                                                                  - name: Setup Flutter
                                                                                                          uses: subosito/flutter-action@v2
                                                                                                                  with:
                                                                                                                            channel: 'stable'
                                                                                                                                      cache: true

                                                                                                                                            - name: Install deps
                                                                                                                                                    run: flutter pub get

                                                                                                                                                          - name: Build debug APK
                                                                                                                                                                  run: flutter build apk --debug

                                                                                                                                                                        - name: Upload APK artifact
                                                                                                                                                                                uses: actions/upload-artifact@v4
                                                                                                                                                                                        with:
                                                                                                                                                                                                  name: app-debug-apk
                                                                                                                                                                                                            path: mobile/build/app/outputs/flutter-apk/app-debug.apk